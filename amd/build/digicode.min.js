define(["jquery","core/log"],function(a,b){var c,d,e={init:function(e){a(".digicode-digit").bind("mouseover",this.highlight_digit),a("#digicode-panel").bind("mouseout",this.lightoff_digits),a(".digicode-digit").bind("mousedown",this.add_digit),a(".digicode-digit").bind("mouseup",this.release_digits),a("#digicode-input").val(""),e>0?(c=e,d=1,a("#chrono-display").addClass("chrono-countup")):(c=-e,d=-1,a("#chrono-display").addClass("chrono-countdown")),setInterval(this.chronotimer,1e3),b.debug("ADM Digicode initialized")},add_digit:function(){that=a(this);var b=a("#digicode-input").val(),c=a("#digicode-shadow").html();b+=that.html(),c+="*",a("#digicode-input").val(b),a("#digicode-shadow").html(c),that.addClass("active")},highlight_digit:function(){that=a(this),e.lightoff_digits(),that.addClass("highlighted")},lightoff_digits:function(){a(".digicode-digit").removeClass("highlighted")},release_digits:function(){a(".digicode-digit").removeClass("active")},chronotimer:function(){b.debug(c+" "+d),c+=d,h=Math.floor(c/3600),rawm=c-3600*h,m=Math.floor(rawm/60),s=rawm-60*m,b.debug(h+" "+rawm+" "+m+" "+s),h<10?ht="0"+h:ht=h,m<10?mt="0"+m:mt=m,s<10?st="0"+s:st=s,a("#chrono-display").html(ht+":"+mt+":"+st)}};return e});
/**
 * Javascript for the digicode interface.
 *
 * @module     auth_digicode/digicode
 * @package    auth_digicode
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("auth_digicode/digicode",["jquery","core/log"],(function($,log){var chronotime,chronodir,digicode={init:function(args){$(".digicode-digit").bind("mouseover",this.highlight_digit),$("#digicode-panel").bind("mouseout",this.lightoff_digits),$(".digicode-digit").bind("mousedown",this.add_digit),$(".digicode-digit").bind("mouseup",this.release_digits),$("#digicode-input").val(""),args>0?(chronotime=args,chronodir=1,$("#chrono-display").addClass("chrono-countup")):(chronotime=-args,chronodir=-1,$("#chrono-display").addClass("chrono-countdown")),setInterval(this.chronotimer,1e3),log.debug("ADM Digicode initialized")},add_digit:function(){var that=$(this),value=$("#digicode-input").val(),shadow=$("#digicode-shadow").html();value+=that.html(),shadow+="*",$("#digicode-input").val(value),$("#digicode-shadow").html(shadow),that.addClass("active")},highlight_digit:function(){var that=$(this);digicode.lightoff_digits(),that.addClass("highlighted")},lightoff_digits:function(){$(".digicode-digit").removeClass("highlighted")},release_digits:function(){$(".digicode-digit").removeClass("active")},chronotimer:function(){log.debug(chronotime+" "+chronodir),chronotime+=chronodir;var ht,mt,st,h=Math.floor(chronotime/3600),rawm=chronotime-3600*h,m=Math.floor(rawm/60),s=rawm-60*m;log.debug(h+" "+rawm+" "+m+" "+s),ht=h<10?"0"+h:h,mt=m<10?"0"+m:m,st=s<10?"0"+s:s,$("#chrono-display").html(ht+":"+mt+":"+st)}};return digicode}));

//# sourceMappingURL=digicode.min.js.map
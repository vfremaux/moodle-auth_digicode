{"version":3,"sources":["../src/digicode.js"],"names":["define","$","log","chronotime","chronodir","digicode","init","args","bind","highlight_digit","lightoff_digits","add_digit","release_digits","val","addClass","setInterval","chronotimer","debug","that","value","shadow","html","removeClass","h","Math","floor","rawm","m","s","ht","mt","st"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript for the digicode interface.\n *\n * @module     auth_digicode/digicode\n * @package    auth_digicode\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n// jshint unused: true, undef:true\ndefine(['jquery', 'core/log'], function($, log) {\n\n    var chronotime;\n    var chronodir;\n\n    var digicode = {\n        init: function(args) {\n            $('.digicode-digit').bind('mouseover', this.highlight_digit);\n            $('#digicode-panel').bind('mouseout', this.lightoff_digits);\n            $('.digicode-digit').bind('mousedown', this.add_digit);\n            $('.digicode-digit').bind('mouseup', this.release_digits);\n            $('#digicode-input').val(''); // Ensure it is empty at start.\n\n            if (args > 0) {\n                chronotime = args;\n                chronodir = 1;\n                $('#chrono-display').addClass('chrono-countup');\n            } else {\n                chronotime = -args;\n                chronodir = -1;\n                $('#chrono-display').addClass('chrono-countdown');\n            }\n\n            setInterval(this.chronotimer, 1000);\n\n            log.debug(\"ADM Digicode initialized\");\n        },\n\n        add_digit: function() {\n            var that = $(this);\n\n            var value = $('#digicode-input').val();\n            var shadow = $('#digicode-shadow').html();\n            value += that.html();\n            shadow += '*';\n            $('#digicode-input').val(value);\n            $('#digicode-shadow').html(shadow);\n            that.addClass('active');\n        },\n\n        highlight_digit: function() {\n            var that = $(this);\n\n            digicode.lightoff_digits();\n            that.addClass('highlighted');\n        },\n\n        lightoff_digits: function() {\n            $('.digicode-digit').removeClass('highlighted');\n        },\n\n        release_digits: function() {\n            $('.digicode-digit').removeClass('active');\n        },\n\n        chronotimer: function() {\n\n            log.debug(chronotime + \" \" + chronodir);\n            chronotime += chronodir;\n\n            var h = Math.floor(chronotime / 3600);\n            var rawm = chronotime - (h * 3600);\n            var m = Math.floor(rawm / 60);\n            var s = rawm - (m * 60);\n            var ht, mt, st;\n\n            log.debug(h + ' ' + rawm + ' ' + m + ' ' + s);\n\n            if (h < 10) {\n                ht = '0' + h;\n            } else {\n                ht = h;\n            }\n\n            if (m < 10){\n                 mt = '0' + m;\n            } else {\n               mt = m;\n            }\n\n            if (s < 10){\n                st = '0' + s;\n            } else {\n                st = s;\n            }\n\n            $('#chrono-display').html(ht + ':' + mt + ':' + st);\n\n        },\n\n    };\n\n    return digicode;\n});\n"],"file":"digicode.min.js"}